generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}


model LessonCategory {
  id        Int       @id @default(autoincrement())
  questions Question[]

  @@map("lesson_categories")
}

model Question {
  id                  Int               @id @default(autoincrement())
  jsonId              String            @db.VarChar(255)
  title               String            @db.Text
  img                 String?           @db.VarChar(255)
  correctAnswerIndex  Int
  lessonCategoryId    Int
  lessonCategory      LessonCategory    @relation(fields: [lessonCategoryId], references: [id], onDelete: Cascade)
  options             QuestionOption[]
  comments            QuestionComment[]

  @@unique([lessonCategoryId, jsonId])
  @@map("questions")
}

model QuestionOption {
  id          Int      @id @default(autoincrement())
  text        String   @db.Text
  order       Int
  questionId  Int
  question    Question @relation(fields: [questionId], references: [id], onDelete: Cascade)

  @@unique([questionId, order])
  @@map("question_options")
}

model QuestionComment {
  id         Int      @id @default(autoincrement())
  questionId Int
  question   Question @relation(fields: [questionId], references: [id], onDelete: Cascade)
  authorName String   @db.VarChar(255)
  text       String   @db.Text
  createdAt  DateTime @default(now())

  @@map("question_comments")
}
